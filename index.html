<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bflix</title>

<style>
    :root{
        --bg:#0a0a0a;
        --card:#111;
        --txt:#fff;
        --btn:#18ff8f;
    }
    body.light{
        --bg:#f6f6f6;
        --card:#ffffff;
        --txt:#111;
        --btn:#00c06f;
    }

    body{
        background:var(--bg);
        margin:0;
        font-family:Arial, sans-serif;
        color:var(--txt);
        transition:.3s;
    }

    /* üî• Barra superior */
    nav{
        background:#000;
        padding:15px 22px;
        display:flex;
        justify-content:space-between;
        align-items:center;
        font-size:22px;
    }
    nav span{
        font-weight:bold;
        color:#18ff8f;
    }
    nav button{
        background:none;border:none;
        font-size:20px;color:white;
        cursor:pointer;
        margin-left:15px;
    }

    /* üî• P√°gina principal */
    #home{
        text-align:center;margin-top:100px;
    }
    #home h1{font-size:38px;margin-bottom:6px;}
    #home p{opacity:.8;margin-bottom:25px;}
    #home button{
        padding:10px 24px;border-radius:6px;
        border:none;background:var(--btn);
        font-size:18px;font-weight:bold;
        cursor:pointer;
    }

    /* =============== SISTEMA DE PETICIONES ================= */

    #peticionesPanel{
        display:none;padding:25px;
        max-width:800px;margin:auto;
    }

    .adminMode{color:#18ff8f;font-weight:bold;margin-bottom:10px;}

    .card{
        background:var(--card);
        padding:18px;
        border-radius:12px;
        margin-bottom:22px;
    }

    input,select{
        width:100%;padding:10px;margin-top:8px;
        background:#0003;border:none;
        border-radius:8px;color:var(--txt);
        font-size:16px;
    }

    button.main{
        background:var(--btn);border:none;
        padding:11px 20px;font-weight:bold;
        border-radius:8px;width:100%;margin-top:10px;
        cursor:pointer;color:black;
    }

    .petItem{
        background:var(--card);
        padding:12px;border-radius:8px;
        display:flex;justify-content:space-between;
        margin-bottom:10px;
    }
    .acciones button{
        background:none;border:none;color:var(--btn);
        margin-left:6px;cursor:pointer;
    }
    .realizada{color:#00ff6a;font-weight:bold;}

    /* Popup de enviado */
    #popup{
        display:none;position:fixed;inset:0;
        background:#000000aa;backdrop-filter:blur(3px);
        justify-content:center;align-items:center;
    }
    #popup div{
        background:white;color:black;
        padding:25px;border-radius:12px;
        font-size:20px;text-align:center;
        animation:show .3s;
    }
    @keyframes show{from{scale:.6;opacity:0;}to{scale:1;opacity:1;}}
</style>
</head>
<body>

<nav>
    <span>Bflix</span>
    <button onclick="abrirPeticiones()">üì© Peticiones</button>
</nav>

<!-- üåç PAGINA DE INICIO -->
<section id="home">
    <h1>Bienvenido a Bflix</h1>
    <p>Centro multimedia, herramientas y peticiones.</p>
    <button onclick="abrirPeticiones()">Ir a Peticiones üì©</button>
</section>

<!-- ==================== LOGIN & PETICIONES ==================== -->
<section id="peticionesPanel">

    <div id="loginBox" class="card">
        <h2>Acceso üîê</h2>
        <button class="main" onclick="modoInvitado()">Ingresar como Invitado üë§</button>
        <button class="main" onclick="modoAdmin()">Administrador üîë</button>
    </div>

    <div id="panelSistema" style="display:none;">

        <div class="adminMode" id="modoTxt"></div>

        <div style="display:flex;gap:10px;margin-bottom:15px">
            <button onclick="tema()" class="main" style="flex:1;">üåì Tema</button>
            <button onclick="cerrarSesion()" class="main" style="flex:1;">Cerrar</button>
        </div>

        <div class="card">
            <h3>Agregar nueva petici√≥n</h3>
            <input id="nombre" placeholder="Nombre">
            <input id="ano" placeholder="A√±o">
            <select id="tipo">
                <option>Pelicula</option>
                <option>Serie</option>
            </select>
            <button class="main" onclick="add()">Enviar Petici√≥n</button>
        </div>

        <div class="card">
            <h3>Listado</h3>
            <select id="filtro" onchange="mostrar()">
                <option value="todos">Todos</option>
                <option value="pendientes">Pendientes</option>
                <option value="realizadas">Realizadas</option>
            </select>
            <input id="search" placeholder="Buscar..." oninput="mostrar()">
            <div id="lista" style="margin-top:12px;"></div>
        </div>
    </div>
</section>

<!-- POPUP -->
<div id="popup"><div>üì® Su solicitud ha sido enviada</div></div>

<script>
    let pet=JSON.parse(localStorage.getItem("bflixData")||"[]");
    let admin=false;
    let sonidoAct=true; 
    const son=new Audio("https://actions.google.com/sounds/v1/cartoon/wood_plank_flicks.ogg");

    function abrirPeticiones(){
        document.getElementById("home").style.display="none";
        document.getElementById("peticionesPanel").style.display="block";
    }

    function modoInvitado(){admin=false;iniciar();}
    function modoAdmin(){
        let u=prompt("Usuario:");let p=prompt("Contrase√±a:");
        if(u=="BflixTeam" && p=="PassBflixMovian"){admin=true;iniciar();}
        else alert("Acceso denegado ‚ùå");
    }

    function iniciar(){
        loginBox.style.display="none";
        panelSistema.style.display="block";
        modoTxt.textContent=admin?"Modo Administrador ‚úî":"Modo Invitado üë§";
        mostrar();
    }

    function cerrarSesion(){location.reload();}

    function add(){
        let n=nombre.value.trim(),a=ano.value.trim(),t=tipo.value;
        if(!n||!a) return alert("Completa todo");

        pet.push({txt:`${n} (${a}) [${t}]`,real:false});
        guardar();
        popup();
        son.play();
    }

    function popup(){
        let p=document.getElementById("popup");
        p.style.display="flex";
        setTimeout(()=>p.style.display="none",1800);
    }

    function mostrar(){
        lista.innerHTML="";
        for(let i=0;i<pet.length;i++){
            let x=pet[i];
            if(filtro.value=="pendientes" && x.real)continue;
            if(filtro.value=="realizadas" && !x.real)continue;

            let div=document.createElement("div");
            div.className="petItem";

            let estado = x.real 
                ? "<b class='realizada'>‚úî REALIZADA ‚úî</b>" 
                : "<b style='color:#ff4d4d;'>üö´ PENDIENTE üö´</b>";

            div.innerHTML=`<span>${x.txt} ‚Äî ${estado}</span>`;
            
            let op=document.createElement("div");

            if(admin && !x.real){
                let b=document.createElement("button");
                b.textContent="Marcar realizada ‚úî";
                b.onclick=()=>{x.real=true;guardar();}
                op.appendChild(b);
            }

            div.appendChild(op);
            lista.appendChild(div);
        }
    }

    function guardar(){
        localStorage.setItem("bflixData",JSON.stringify(pet));
        mostrar();
    }

    function tema(){document.body.classList.toggle("light");}
</script>

</body>
</html>